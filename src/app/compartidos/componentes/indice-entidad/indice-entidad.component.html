<h2>{{titulo}}</h2>

<button mat-flat-button routerLink="{{ rutaCrear }}" class="mb-3">
  Crear Nuevo
</button>

<app-listado-generico [listado]="entidades">
  <ng-container contenido>
    @if (entidades && entidades.length > 0) {
      <table mat-table [dataSource]="entidades" class="mat-elevation-z8 indice-elementos">

        @for (columna of columnasAMostrar; track $index) {

          @if (columna === 'acciones') {
            <ng-container matColumnDef="acciones">
              <th mat-header-cell *matHeaderCellDef>Acciones</th>
              <td mat-cell *matCellDef="let elemento">
                <a
                  routerLink="{{ rutaEditar + '/' + elemento.id }}"
                  class="primary"
                  mat-flat-button
                >
                  Editar
                </a>
                <button
                  mat-flat-button
                  class="warn"
                  [swal]="{
                    title: 'Confirmación',
                    text: '¿Deseas borrar este registro?',
                    showCancelButton: true
                  }"
                  (confirm)="borrar(elemento.id)"
                >
                  Borrar
                </button>
              </td>
            </ng-container>
          } @else {
            <ng-container [matColumnDef]="columna">
              <th mat-header-cell *matHeaderCellDef>
                {{ primeraLetraEnMayuscula(columna) }}
              </th>
              <td mat-cell *matCellDef="let elemento">
                {{ elemento[columna] }}
              </td>
            </ng-container>
          }
        }

        <tr mat-header-row *matHeaderRowDef="columnasAMostrar"></tr>
        <tr mat-row *matRowDef="let row; columns: columnasAMostrar;"></tr>
      </table>

      <mat-paginator
        showFirstLastButtons
        [length]="cantidadTotalRegistros"
        [pageSize]="paginacion.recordsPorPagina"
        [pageSizeOptions]="[5, 10, 50]"
        (page)="actualizarPaginacion($event)"
        [pageIndex]="paginacion.pagina - 1"
      ></mat-paginator>
    } @else {
      <p>No hay registros disponibles.</p>
    }
  </ng-container>
</app-listado-generico>
